<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<Class name="Utils.Persistent">
<Super>%Persistent</Super>
<TimeCreated>63866,77757.302743</TimeCreated>

<Property name="Main">
<Type>%String</Type>
</Property>

<Method name="Populate">
<Description>
	do ##class(Utils.Persistent).Populate()</Description>
<ClassMethod>1</ClassMethod>
<FormalSpec>Num=10,Main=$Namespace</FormalSpec>
<Implementation><![CDATA[

	for i=1:1:Num {
		set obj = ..%New()
		set obj.Main = Main _ i
		do obj.%Save()
	}
]]></Implementation>
</Method>

<Method name="Display">
<Description>
	do ##class(Utils.Persistent).Display()</Description>
<ClassMethod>1</ClassMethod>
<Implementation><![CDATA[
	Set tMainStatement = ##class(%SQL.Statement).%New()
	Set tStatus = tMainStatement.%Prepare("SELECT * FROM Utils.Persistent")
	If $$$ISERR(tStatus) {
		w $System.Status.GetErrorText(tStatus)
		Quit
	}
	
	Set tRS = tMainStatement.%Execute()
	While tRS.%Next() {
		w tRS.Main,!
	}
]]></Implementation>
</Method>

<Method name="GetExtentSize">
<Description>
w ##class(Utils.Persistent).GetExtentSize("Utils.Persistent")</Description>
<ClassMethod>1</ClassMethod>
<FormalSpec>Class:%String</FormalSpec>
<ReturnType>%Integer</ReturnType>
<Implementation><![CDATA[
	Set Global = ..GetDataGlobal(Class)
	Set Id = $Order(@Global@(""))
	Set Count = 0
	While Id '= "" {
		Set Id = $o(@Global@(Id))
		Set Count = Count + 1
	}
	Return Count
]]></Implementation>
</Method>

<Method name="GetDataGlobal">
<Description>
w ##class(Utils.Persistent).GetGlobal("Utils.Persistent")</Description>
<ClassMethod>1</ClassMethod>
<FormalSpec>Class:%String</FormalSpec>
<ReturnType>%String</ReturnType>
<Implementation><![CDATA[
	Return:'$$$comClassDefined(Class) ""
	Set Strategy = $$$comClassKeyGet(Class, $$$cCLASSstoragestrategy)
	Return $$$defMemberKeyGet(Class, $$$cCLASSstorage, Strategy, $$$cSDEFdatalocation)
]]></Implementation>
</Method>

<Storage name="Default">
<Type>%Library.CacheStorage</Type>
<DataLocation>^Utils.PersistentD</DataLocation>
<DefaultData>PersistentDefaultData</DefaultData>
<IdLocation>^Utils.PersistentD</IdLocation>
<IndexLocation>^Utils.PersistentI</IndexLocation>
<StreamLocation>^Utils.PersistentS</StreamLocation>
<Data name="PersistentDefaultData">
<Value name="1">
<Value>%%CLASSNAME</Value>
</Value>
<Value name="2">
<Value>Main</Value>
</Value>
</Data>
</Storage>
</Class>
</Export>
